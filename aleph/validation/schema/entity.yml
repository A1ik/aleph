EntitiesResponse:
  type: object
  allOf:
    - $ref: '#/components/schemas/QueryResponse'
  properties:
    links:
      properties:
        export:
          type: string
      type: object
    results:
      items:
        $ref: '#/components/schemas/Entity'
      type: array

Entity:
  type: object
  allOf:
  - $ref: '#/components/schemas/DatedModel'
  properties:
    collection:
      $ref: '#/components/schemas/Collection'
    countries:
      items:
        type: string
      type: array
    dates:
      items:
        type: string
      type: array
    highlight:
      items:
        type: string
      type: array
    job_id:
      type: string
    links:
      properties:
        tags:
          type: string
        csv:
          type: string
          nullable: true
        file:
          type: string
          nullable: true
        pdf:
          type: string
          nullable: true
        reference:
          type: string
        self:
          type: string
        ui:
          type: string
      type: object
    name:
      type: string
    properties:
      type: object
    schema:
      type: string
    schemata:
      items:
        type: string
      type: array
    score:
      type: number
    writable:
      type: boolean

EntityUpdate:
  required: ["schema"]
  type: object
  properties:
    schema:
      type: string
      format: schema
    properties:
      type: object

EntityCreate:
  type: object
  allOf:
    - $ref: '#/components/schemas/EntityUpdate'
  required: ["collection_id"]
  properties:
    collection_id:
      type: string
    foreign_id:
      type: string

EntityReferences:
  type: object
  properties:
    results:
      items:
        properties:
          count:
            type: integer
          property:
            type: object
          schema:
            type: string
            format: schema
        type: object
      type: array
    status:
      description: ok
      type: string
    total:
      type: integer

EntityTagsResponse:
  type: object
  properties:
    results:
      items:
        properties:
          count:
            type: integer
          field:
            type: string
          id:
            description: query string for this tag
            type: string
          value:
            type: string
        type: object
      type: array
    status:
      description: ok
      type: string
    total:
      type: integer