DiagramUpdate:
  type: object
  properties:
    label:
      type: string
    summary:
      type: string
      nullable: true
    layout:
      type: object
      allOf:
        - $ref: '#/components/schemas/Layout'
    entities:
      type: array
      items:
        type: string
  required: []

DiagramCreate:
  type: object
  allOf:
    - $ref: '#/components/schemas/DiagramUpdate'
  properties:
    collection_id:
      type: integer
  required: ["label", "collection_id"]

Diagram:
  type: object
  allOf:
  - $ref: '#/components/schemas/DatedModel'
  properties:
    collection:
      type: object
      allOf:
      - $ref: '#/components/schemas/Collection'
    role_id:
      type: string
    label:
      type: string
    summary:
      type: string
      nullable: true
    entities:
      type: array
      items:
        type: object
        allOf:
        - $ref: '#/components/schemas/EntityUpdate'
        properties:
          id:
            type: string
        required: ["id", "schema"]
    layout:
      type: object
      allOf:
        - $ref: '#/components/schemas/Layout'
    writeable:
      type: boolean
  required: ["collection", "role_id", "label", "layout", "entities", "writeable"]

Layout:
  type: object
  required: ["vertices", "edges"]
  properties:
    vertices:
      type: array
      items:
        type: object
        properties:
          id:
            type: string
          type:
            type: string
          label:
            type: string
          fixed:
            type: boolean
          hidden:
            type: boolean
          color:
            type: string
          position:
            type: object
            properties:
              x:
                type: number
              y:
                type: number
          entityId:
            type: string
    edges:
      type: array
      items:
        type: object
        properties:
          id:
            type: string
          type:
            type: string
          label:
            type: string
          sourceId:
            type: string
          targetId:
            type: string
          entityId:
            type: string
          propertyQName:
            type: string
          labelPosition:
            type: object
            properties:
              x:
                type: number
              y:
                type: number
    groupings:
      type: array
      items:
        type: object
        properties:
          id:
            type: string
          label:
            type: string
          color:
            type: string
          vertices:
            type: array
            items:
              type: string
