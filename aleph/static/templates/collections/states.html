<collections-screen collection="collection" section="states">
  <table class="table table-bordered" ng-show="states.total">
    <tr>
      <th>File name</th>
      <th width="15%">Status</th>
      <th>Message</th>
      <th width="15%">Date</th>
    </tr>

    <tr ng-repeat="state in states.results" ng-class="{'warning': state.status == 'fail'}">
      <td>
        <code>
          <a ng-click="showDetail(state)" ng-bind="::state.meta.file_name || state.meta.foreign_id | characters:40"></a>
        </code>
      </td>
      <td>
        <span ng-if="state.status == 'ok'">
          <i class="fa fa-check-circle" aria-hidden="true"></i>
        </span>
        <span ng-if="state.status == 'fail'">
          <i class="fa fa-times-circle" aria-hidden="true"></i>
        </span>
        <code ng-if="state.error_type">
          <span ng-bind="::state.error_type"></span>
        </code>
      </td>
      <td ng-bind="::state.error_message | characters:70"></td>
      <td ng-bind="::state.created_at | calendar"></td>
    </tr>
  </table>

  <div ng-hide="states.total">
    <div class="alert alert-info">
      <strong>No imports have started.</strong> If you have just uploaded files, please check back in
      a few moments after the data has been processed.
      <a ng-click="reload()" class="alert-link">Click here to refresh...</a>
    </div>
    <!-- collections-empty-teaser collection="collection"></collections-empty-teaser -->
  </div>

  <div class="bottom-pager">
    <div class="pull-right">
      <response-pager response="states" load="loadOffset(offset)"></response-pager>
    </div>
    <div class="total" ng-if="!states.total">
      No import log entries were found.
    </div>
    <div class="total" ng-if="states.total">
      Found {{states.total | number}} import log entries.
    </div>
  </div>
</collections-screen>
