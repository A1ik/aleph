<div class="search-result">
  <div class="document-type">
    <a ng-click="viewDetails()">
      <span ng-if="doc.type == 'tabular'">
        <i class="fa fa-table"></i>
      </span>
      <span ng-if="doc.type == 'text'">
        <i class="fa fa-file-text-o"></i>
      </span>
    </a>
  </div>
  <div class="descriptor">
    <div class="title">
      <a ng-click="viewDetails()" ng-bind="doc.title"></a>
      <!-- span ng-if="doc.title == doc.file_name && doc.extension" class="addon" ng-bind="doc.extension"></span -->
      <span ng-if="doc.title != doc.file_name" class="addon" ng-bind="doc.file_name"></span>
    </div>

    <div class="source">
      <a ng-click="filterSource(doc.source_id)" class="source"
        ng-bind="result.sources.labels[doc.source_id]"></a>
      <span ng-if="doc.source_url">
        |
        <i class="fa fa-external-link"></i>
        from
        <a ng-href="{{doc.source_url}}" target="_new">{{doc.source_url | host}}</a>
      </span>
      <span ng-if="doc.languages.length > 0 && doc.languages.length < 4">
        |
        <i class="fa fa-language"></i>
        in 
        <span ng-repeat="lang in doc.languages">
          {{lang | language}}<span ng-if="!$last">,</span>
        </span>
      </span>
      <span ng-if="doc.updated_at">
        |
        <i class="fa fa-clock-o"></i>
        as of
        {{doc.updated_at | date}}
      </span>
    </div>

    <div class="summary" ng-if="doc.summary && !doc.records.total">
      &bdquo;<span ng-bind="doc.summary"></span>&ldquo;
    </div>
    <div class="records" ng-if="doc.records.total">
      <ul ng-repeat="rec in doc.records.results">
        <li>
          &bdquo;<span ng-click="viewDetails(rec)" class="click" ng-repeat="snippet in rec.snippets" ng-bind-html="snippet"></span>&ldquo;
          <span ng-if="doc.type == 'tabular'" class="ref">in <a ng-click="viewDetails(rec)">row {{rec.row_id | number}}</a></span>
          <span ng-if="doc.type == 'text'" class="ref">on <a ng-click="viewDetails(rec)">page {{rec.page | number}}</a></span>
        </li>
      </ul>
      <span class="total" ng-if="doc.records.totals > doc.records.results.length">
        ({{doc.records.total}} matching
        <span ng-if="doc.type == 'tabular'">
          rows in total)
        </span>
        <span ng-if="doc.type == 'text'">
          pages in total)
        </span>
      </span>
    </div>
  </div>
</div>
